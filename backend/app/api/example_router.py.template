"""
Example API router template.
Copy this file to create new API endpoints.

Usage:
1. Copy this file and rename it (e.g., pages.py, users.py)
2. Update the router tags and prefix
3. Implement your endpoints
4. Import and include in main.py
"""

from fastapi import APIRouter, Depends, HTTPException, status
from sqlalchemy import select
from sqlalchemy.ext.asyncio import AsyncSession

from app.db.session import get_db
# from app.models.your_model import YourModel
# from app.schemas.your_schema import YourSchema, YourSchemaCreate, YourSchemaUpdate

router = APIRouter(
    prefix="/your-resource",
    tags=["your-resource"],
)


@router.get("/")
async def list_items(
    skip: int = 0,
    limit: int = 100,
    db: AsyncSession = Depends(get_db),
):
    """List all items."""
    # stmt = select(YourModel).offset(skip).limit(limit)
    # result = await db.execute(stmt)
    # items = result.scalars().all()
    # return items
    return {"message": "List endpoint"}


@router.get("/{item_id}")
async def get_item(
    item_id: int,
    db: AsyncSession = Depends(get_db),
):
    """Get a specific item by ID."""
    # stmt = select(YourModel).where(YourModel.id == item_id)
    # result = await db.execute(stmt)
    # item = result.scalar_one_or_none()
    # if not item:
    #     raise HTTPException(status_code=404, detail="Item not found")
    # return item
    return {"message": f"Get item {item_id}"}


@router.post("/", status_code=status.HTTP_201_CREATED)
async def create_item(
    # item_in: YourSchemaCreate,
    db: AsyncSession = Depends(get_db),
):
    """Create a new item."""
    # item = YourModel(**item_in.model_dump())
    # db.add(item)
    # await db.commit()
    # await db.refresh(item)
    # return item
    return {"message": "Create endpoint"}


@router.put("/{item_id}")
async def update_item(
    item_id: int,
    # item_in: YourSchemaUpdate,
    db: AsyncSession = Depends(get_db),
):
    """Update an existing item."""
    # stmt = select(YourModel).where(YourModel.id == item_id)
    # result = await db.execute(stmt)
    # item = result.scalar_one_or_none()
    # if not item:
    #     raise HTTPException(status_code=404, detail="Item not found")
    #
    # update_data = item_in.model_dump(exclude_unset=True)
    # for field, value in update_data.items():
    #     setattr(item, field, value)
    #
    # await db.commit()
    # await db.refresh(item)
    # return item
    return {"message": f"Update item {item_id}"}


@router.delete("/{item_id}", status_code=status.HTTP_204_NO_CONTENT)
async def delete_item(
    item_id: int,
    db: AsyncSession = Depends(get_db),
):
    """Delete an item."""
    # stmt = select(YourModel).where(YourModel.id == item_id)
    # result = await db.execute(stmt)
    # item = result.scalar_one_or_none()
    # if not item:
    #     raise HTTPException(status_code=404, detail="Item not found")
    #
    # await db.delete(item)
    # await db.commit()
    return None
